{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>{{ title }}</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <link href="{% static 'portfolio/assets/vendor/css.css' %}" rel="stylesheet">
  <link href="{% static 'portfolio/assets/vendor/bootstrap/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'portfolio/assets/vendor/bootstrap-icons/bootstrap-icons.min.css' %}" rel="stylesheet">
  <script src="{% static 'portfolio/assets/vendor/bootstrap/bootstrap.bundle.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
  <link href="{% static 'portfolio/style.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head>

<body>
  {% if messages %}
  <div class="messages">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="animated-background">
      <div class="cube"></div>
      <div class="cube"></div>
      <div class="cube"></div>
      <div class="cube"></div>
      <div class="cube"></div>
    </div>
    <div class="container">
      <div class="header-content">
        <div class="header-text">
          <h1><a href="{% url 'portfolio:home' %}">{{ personal_info.name }}</a></h1>
          <h2>I'm a passionate <span class="typed" data-typed-items="Web Developer, Frontend Developer, Backend Developer, Full Stack Developer"></span> from India</h2>
          <nav id="navbar" class="navbar">
            <div class="nav-content">
              <ul>
                <li><a class="nav-link active" href="#header">Home</a></li>
                <li><a class="nav-link" href="#about">About</a></li>
                <li><a class="nav-link" href="#projects">Projects</a></li>
                <li><a class="nav-link" href="#resume">Resume</a></li>
                <li><a class="nav-link" href="#contact">Contact</a></li>
              </ul>
            </div>
          </nav>
          <div class="social-links">
            {% for link in social_links %}
            <a href="{{ link.url }}" class="{{ link.platform }}" target="_blank"><i class="bi bi-{{ link.platform }}"></i></a>
            {% endfor %}
          </div>
        </div>
        <div class="header-image">
          <img src="{% static 'portfolio/assets/img/profilephoto-removebg-preview.png' %}" alt="{{ personal_info.name }}" class="img-fluid">
        </div>
      </div>
    </div>
  </header><!-- End Header -->

  <!-- ======= About Section ======= -->
  <section id="about" class="about">
    <nav id="navbar" class="navbar">
      <div class="nav-content">
        <h1>Nadim Pathan</h1>
        <button class="mobile-nav-toggle">
          <i class="bi bi-list"></i>
        </button>
        <ul class="nav-menu">
          <li><a class="nav-link" href="#header">Home</a></li>
          <li><a class="nav-link active" href="#about">About</a></li>
          <li><a class="nav-link" href="#projects">Projects</a></li>
          <li><a class="nav-link" href="#resume">Resume</a></li>
          <li><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
    <!-- ======= About Me ======= -->
    <div class="about-me container">

      <div class="section-title">
        <h2>About</h2>
        <p>Know more about me</p>
      </div>

      <div class="row">
        <div class="col-lg-4" data-aos="fade-right">
          <img src="{% static 'portfolio/assets/img/profilephoto-removebg-preview.png' %}" class="img-fluid" alt="{{ personal_info.name }}">
        </div>
        <div class="col-lg-8 pt-4 pt-lg-0 content" data-aos="fade-left">
          <h3>{{ personal_info.title }}</h3>
          <p class="fst-italic">
            {{ personal_info.brief_intro }}
          </p>
          <div class="row">
            <div class="col-lg-6">
              <ul>
                <li><i class="bi bi-chevron-right"></i> <strong>Birthday:</strong> <span>{{ personal_info.birthday|date:"d M Y" }}</span></li>
                <li><i class="bi bi-chevron-right"></i> <strong>Website:</strong> <span>{{ personal_info.website }}</span></li>
                <li><i class="bi bi-chevron-right"></i> <strong>Phone:</strong> <span>{{ personal_info.phone }}</span></li>
                <li><i class="bi bi-chevron-right"></i> <strong>City:</strong> <span>{{ personal_info.city }}</span></li>
              </ul>
            </div>
            <div class="col-lg-6">
              <ul>
                <li><i class="bi bi-chevron-right"></i> <strong>Degree:</strong> <span>{{ personal_info.degree }}</span></li>
                <li><i class="bi bi-chevron-right"></i> <strong>Email:</strong> <span>{{ personal_info.email }}</span></li>
                <li><i class="bi bi-chevron-right"></i> <strong>Freelance:</strong> <span>{{ personal_info.freelance }}</span></li>
              </ul>
            </div>
          </div>
          {% comment %} <p>
            Self motivated, highly passionate and hardworking fresher looking for an opportunity to work in challenging organization to utilize my skills and knowledge to work for the growth of the organization.
          </p> {% endcomment %}
        </div>
      </div>

    </div><!-- End About Me -->

    <!-- ======= Skills  ======= -->
    <div class="skills container">

      <div class="section-title">
        <h2>Skills</h2>
      </div>

      <div class="row skills-content">
        {% for skill in skills|dictsort:"order"|slice:":6" %}
        {% if forloop.counter0|divisibleby:2 %}
        <div class="col-lg-6">
        {% endif %}
          <div class="progress">
            <span class="skill">{{ skill.name }} <i class="val">{{ skill.percentage }}%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="{{ skill.percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        {% if forloop.counter|divisibleby:2 or forloop.last %}
        </div>
        {% endif %}
        {% endfor %}
      </div>

    </div><!-- End Skills -->

  </section><!-- End About Section -->

  <!-- ======= Projects Section ======= -->
  <section id="projects" class="projects">
    <nav id="navbar" class="navbar">
      <div class="nav-content">
        <h1>Nadim Pathan</h1>
        <button class="mobile-nav-toggle">
          <i class="bi bi-list"></i>
        </button>
        <ul class="nav-menu">
          <li><a class="nav-link" href="#header">Home</a></li>
          <li><a class="nav-link" href="#about">About</a></li>
          <li><a class="nav-link active" href="#projects">Projects</a></li>
          <li><a class="nav-link" href="#resume">Resume</a></li>
          <li><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">
      <div class="section-title">
        <h2>Projects</h2>
      </div>

      <div class="row projects-container">
        {% for project in projects %}
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="project-card">
            <div class="project-img">
              <img src="{{ project.image.url }}" class="img-fluid" alt="{{ project.title }}">
            </div>
            <div class="project-info">
              <h4>{{ project.title }}</h4>
              <p>{{ project.description }}</p>
              <div class="project-links">
                {% if project.github_link %}
                <a href="{{ project.github_link }}" class="btn btn-primary" target="_blank"><i class="bi bi-github"></i> Code</a>
                {% endif %}
                {% if project.live_demo_link %}
                <a href="{{ project.live_demo_link }}" class="btn btn-secondary" target="_blank"><i class="bi bi-link-45deg"></i> Live Demo</a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section><!-- End Projects Section -->

  <!-- ======= Resume Section ======= -->
  <section id="resume" class="resume">
    <nav id="navbar" class="navbar">
      <div class="nav-content">
        <h1>Nadim Pathan</h1>
        <button class="mobile-nav-toggle">
          <i class="bi bi-list"></i>
        </button>
        <ul class="nav-menu">
          <li><a class="nav-link" href="#header">Home</a></li>
          <li><a class="nav-link" href="#about">About</a></li>
          <li><a class="nav-link" href="#projects">Projects</a></li>
          <li><a class="nav-link active" href="#resume">Resume</a></li>
          <li><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">

      <div class="section-title">
        <h2>Resume</h2>
        <p>Check My Resume</p>
      </div>

      <div class="row">
        <div class="col-lg-12">
          <h3 class="resume-title">Education</h3>
          {% for edu in education %}
          <div class="resume-item">
            <h4>{{ edu.degree }}</h4>
            <h5>{{ edu.start_date|date:"Y" }} - {{ edu.end_date|date:"Y" }}</h5>
            <p><em>{{ edu.institution }}</em></p>
            <p>{{ edu.description }}</p>
            {% if edu.percentage %}
            <p>Percentage: {{ edu.percentage }}%</p>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>

    </div>
  </section><!-- End Resume Section -->

  <!-- ======= Contact Section ======= -->
  <section id="contact" class="contact">
    <nav id="navbar" class="navbar">
      <div class="nav-content">
        <h1>Nadim Pathan</h1>
        <button class="mobile-nav-toggle">
          <i class="bi bi-list"></i>
        </button>
        <ul class="nav-menu">
          <li><a class="nav-link" href="#header">Home</a></li>
          <li><a class="nav-link" href="#about">About</a></li>
          <li><a class="nav-link" href="#projects">Projects</a></li>
          <li><a class="nav-link" href="#resume">Resume</a></li>
          <li><a class="nav-link active" href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">

      <div class="section-title">
        <h2>Contact</h2>
        <p>Contact Me</p>
      </div>

      <div class="row mt-2">

        <div class="col-md-6 d-flex align-items-stretch">
          <div class="info-box">
            <i class="bi bi-geo-alt"></i>
            <h3>My Address</h3>
            <p>{{ personal_info.city }}</p>
          </div>
        </div>

        <div class="col-md-6 mt-4 mt-md-0 d-flex align-items-stretch">
          <div class="info-box">
            <i class="bi bi-share"></i>
            <h3>Social Profiles</h3>
            <div class="social-links">
              {% for link in social_links %}
              <a href="{{ link.url }}" class="{{ link.platform }}" target="_blank"><i class="bi bi-{{ link.platform }}"></i></a>
              {% endfor %}
            </div>
          </div>
        </div>

        <div class="col-md-6 mt-4 d-flex align-items-stretch">
          <div class="info-box">
            <i class="bi bi-envelope"></i>
            <h3>Email Me</h3>
            <p>{{ personal_info.email }}</p>
          </div>
        </div>
        <div class="col-md-6 mt-4 d-flex align-items-stretch">
          <div class="info-box">
            <i class="bi bi-telephone"></i>
            <h3>Call Me</h3>
            <p>{{ personal_info.phone }}</p>
          </div>
        </div>
      </div>

      {% if messages %}
      <div class="row justify-content-center">
        {% for message in messages %}
        <div class="col-md-8">
          <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show text-center" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <form action="{% url 'portfolio:contact' %}" method="POST" role="form" class="php-email-form mt-4">
        {% csrf_token %}
        <div class="row">
          <div class="col-md-6 form-group">
            <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required>
          </div>
          <div class="col-md-6 form-group mt-3 mt-md-0">
            <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
          </div>
        </div>
        <div class="form-group mt-3">
          <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" required>
        </div>
        <div class="form-group mt-3">
          <textarea class="form-control" name="message" rows="5" placeholder="Message" required></textarea>
        </div>
        <div class="my-3">
          <div class="loading">Loading</div>
          <div class="error-message"></div>
          <div class="sent-message">Your message has been sent. Thank you!</div>
        </div>
        <div class="text-center"><button type="submit">Send Message</button></div>
      </form>

    </div>
  </section>

  {% block extra_js %}
  <script>
  document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('.php-email-form');
      const loading = form.querySelector('.loading');
      const errorMessage = form.querySelector('.error-message');
      const sentMessage = form.querySelector('.sent-message');

      // Initially hide all messages
      loading.style.display = 'none';
      errorMessage.style.display = 'none';
      sentMessage.style.display = 'none';

      form.addEventListener('submit', function(e) {
          e.preventDefault();

          // Show loading
          loading.style.display = 'block';
          errorMessage.style.display = 'none';
          sentMessage.style.display = 'none';

          // Get form data
          const formData = new FormData(this);

          fetch(this.action, {
              method: 'POST',
              body: formData
          })
          .then(response => {
              loading.style.display = 'none';
              if (response.ok) {
                  sentMessage.style.display = 'block';
                  form.reset();
                  
                  // Scroll to the success message
                  sentMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
              } else {
                  errorMessage.style.display = 'block';
                  errorMessage.textContent = 'Something went wrong. Please try again.';
              }
          })
          .catch(error => {
              loading.style.display = 'none';
              errorMessage.style.display = 'block';
              errorMessage.textContent = 'An error occurred. Please try again.';
          });
      });
  });
  </script>
  {% endblock %}
  <script src="{% static 'portfolio/js/main.js' %}"></script>
</body>

</html>
